<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="[#HTMLOUTPUT#]/HTML Generator/css/bootstrap.min.css" rel="stylesheet">
    <link href="[#HTMLOUTPUT#]/HTML Generator/css/main.css" rel="stylesheet">
    <link rel="stylesheet" href="Z:/HTML Generator/css/baguetteBox.css">
    <script src="[#HTMLOUTPUT#]/HTML Generator/js/baguetteBox.js" async></script>
    <title>Movies</title>
</head>
<body>
<nav>
    <ul class="nav justify-content-center">
        <li class="nav-item">
            <a class="nav-link active" href="[#HTMLOUTPUT#]/HTML Generator/index.html">Home</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="Z:/HTML Generator/index.html">Home</a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" href="Z:/HTML Generator/sites/movies.html">Movies</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" aria-current="page" href="[#HTMLOUTPUT#]/HTML Generator/sites/series.html">Series</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" aria-current="page" href="[#HTMLOUTPUT#]/HTML Generator/sites/stars.html">Stars</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" aria-current="page"
               href="[#HTMLOUTPUT#]/HTML Generator/sites/producent.html">Producent</a>
        </li>
    </ul>
</nav>
<div class="filter movies-filter">
    <div class="row g-3">
        <div class="col">
            Search
        </div>
        <div class="col">
            <input type="text" class="name-search" placeholder="Search name" aria-label="Last name">
        </div>
        <div class="col">
            Raiting
        </div>
        <div class="col">
            <input type="number" class="raiting-search" max="10" min="0" aria-label="Last name">
        </div>
        <div class="col">
            Series
        </div>
        <div class="col">
            <select class="series-search" aria-label="Default select example">
            </select>
        </div>
        <div class="col">
            Producent
        </div>
        <div class="col">
            <select class="producent-search" aria-label="Default select example">
                <option selected>Select Producent</option>
            </select>
        </div>
        <div class="col">
            Tag
        </div>
        <div class="col">
            <select class="tag-search" aria-label="Default select example">
                <option selected>Select Tag</option>
            </select>
        </div>
        <div class="col">
            Star
        </div>
        <div class="col">
            <select class="stars-search" aria-label="Default select example">
                <option selected>Select Star</option>
            </select>
        </div>
    </div>
</div>
<main class='content container'>
    <div class="row movies-output">[#MoviesOputs#]</div>
</main>
</body>
<script src="[#HTMLOUTPUT#]\HTML Generator\js\lists.js"></script>
<script src="[#HTMLOUTPUT#]\HTML Generator\js\paginator.js"></script>
<script src="[#HTMLOUTPUT#]\HTML Generator\js\movies.js"></script>
<script src="[#HTMLOUTPUT#]\HTML Generator\js\load.js"></script>
<script src="[#HTMLOUTPUT#]\HTML Generator\js\filters.js"></script>
<script>
    movies_results=movies
    movies_filter=[]
    let paginate = true
    let LoadMoviesObjInit=new LoadMovies()
    const form=new FilterMovies(movies_filter)
    form.set_form(movies_results)

    window.addEventListener("scroll", (event) => {
        if (paginate){
            var limit = document.body.offsetHeight - window.innerHeight;
            let scrol_pos=90/100*limit
            if (window.scrollY>scrol_pos){
                LoadMoviesObjInit.ListOBJ.return_data(page++)
               
            }
        }
    });

    let search =document.querySelector('.name-search')
    search.addEventListener("keyup", function(){
        LoadMoviesObjInit.div_output.innerHTML=''
        if (this.value.length>2){
            page=0
            LoadMoviesObjInit.div_output.innerHTML=''
            movies_filter["name"] = this.value
            paginate = false
            LoadMoviesObjInit = new LoadMovies(movies_filter)
            form.set_tag(LoadMoviesObjInit.results)
            form.set_series(LoadMoviesObjInit.results)
        }
    });

    let search_raiting =document.querySelector('.raiting-search')
    search_raiting.addEventListener("change", function(){
        page=0
        LoadMoviesObjInit.div_output.innerHTML=''
        movies_filter["raiting"] = this.value
        paginate = false
        LoadMoviesObjInit = new LoadMovies(movies_filter)
        movies_results = LoadMoviesObjInit.data
    });

    let series_search =document.querySelector('.series-search')
    series_search.addEventListener("change", function(){
        page=0
        LoadMoviesObjInit.div_output.innerHTML=''
        movies_filter["series"] = this.value
        LoadMoviesObjInit=new LoadMovies(movies_filter)
        form.set_producent(LoadMoviesObjInit.results)
        form.set_stars(LoadMoviesObjInit.results)
        form.set_tag(LoadMoviesObjInit.results)
    });

    let producent_search =document.querySelector('.producent-search')
    producent_search.addEventListener("change", function(){
        page=0
        LoadMoviesObjInit.div_output.innerHTML=''
        movies_filter["producent"] = this.value
        LoadMoviesObjInit = new LoadMovies(movies_filter)
        form.set_producent(LoadMoviesObjInit.results)
        form.set_series(LoadMoviesObjInit.results)
        form.set_stars(LoadMoviesObjInit.results)
        form.set_tag(LoadMoviesObjInit.results)
    });

    let stars_search =document.querySelector('.stars-search')
    stars_search.addEventListener("change", function(){
        page=0
        LoadMoviesObjInit.div_output.innerHTML=''
        movies_filter["star"] = this.value
        paginate = false
        LoadMoviesObjInit = new LoadMovies(movies_filter)
        form.set_producent(LoadMoviesObjInit.results)
        form.set_series(LoadMoviesObjInit.results)
        form.set_stars(LoadMoviesObjInit.results)
        form.set_tag(LoadMoviesObjInit.results)
    });

    let tag_search =document.querySelector('.tag-search')
    tag_search.addEventListener("change", function(){
        page=0
        LoadMoviesObjInit.div_output.innerHTML=''
        movies_filter["tag"] = this.value
        paginate = false
        LoadMoviesObjInit = new LoadMovies(movies_filter)
        form.set_producent(LoadMoviesObjInit.results)
        form.set_series(LoadMoviesObjInit.results)
        form.set_stars(LoadMoviesObjInit.results)
        form.set_tag(LoadMoviesObjInit.results)
    });
    
</script>
</html>

